<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
		<title th:text="#{view.search.pagetitle}"></title>
		<link th:href="@{/css/semantic.min.css}" rel="stylesheet" type="text/css" />
    	<link th:href="@{/css/header.css}" rel="stylesheet" type="text/css" />
    	<link th:href="@{/css/originalIndex.css}" rel="stylesheet" type="text/css" />
    	<script type="text/javascript" th:src="@{/js/jquery-3.4.1.min.js}"></script>
		
		<link th:href="@{/css/jquery-ui.css}" rel="stylesheet" type="text/css" />
		<script type="text/javascript" th:src="@{/js/jquery-ui.min.js}"></script>
		<script type="text/javascript" th:src="@{/js/datepicker-ja.js}"></script>
		
	<body>
	
		<!--外部ヘッダーファイル読み込み-->
		<div th:insert="header :: header"></div>
​
		<!--ページで書き換え -->
		<p></p>
		<div class="komidasi">
			<h3><th:block  th:text="#{view.search.pagetitle}"></h3>
		</div>
		<p></p>
		<div class="ui right aligned  container">
			<form method="get" action="/logout">
						<button type="submit" class="ui inverted primary button" style="float:right;">
								<p th:text="#{view.btn.logout}"></p>
						</button>
			</form>
		</div>
		<div class="ui left aligned  container">
			<p></p>
			<form method="post" action="/from">
					<div th:if="${adminbtn}">
						<button type="submit" class="ui inverted primary button">
							<p th:text="#{view.btn.thermoinfo}"></p>
						</button></div>
					<div th:unless="${adminbtn}">
						<button class="ui disabled inverted grey primary button">
							<p th:text="#{view.btn.thermoinfo}"></p>
						</button></div>
			</form>
		</div>
		<p></p>
		
		<!------------------------------------------- 本体始まり ----------------------------------------------------->
		<form class="ui form" th:action="@{/search_info}" th:object="${searchInfo}" method="post">
		<div class="ui container">
​
			<div class="ui horizontal divider"><!-- 線を引いてテキストを入れれる --><p th:text="#{view.label.searchinfo}"></div>
			<p></p>
			
			<table class="ui very basic table">
				<thead class="delete">
				<tr>
					<th th:text="#{view.tablelabel.regist_date}">
					<th th:text="#{view.tablelabel.name}">
					<th th:text="#{view.tablelabel.grade}">
					<th></th>
				</tr>
				<tbody>
					<tr>
						<td th:data-label="#{view.tablelabel.regist_date}">
							<div class="ui input">
							<input type="text" id="datepicker" th:field="*{sch_date}" placeholder="年/月/日"></div>
							<div th:if="${date_error}" th:text="${date_error}"></div>
							<div th:if="${example}" th:text="${example}"></div></td>
						<td th:data-label="#{view.tablelabel.name}">
							<div class="ui input">
							<input type="text" th:field="*{sch_name}" maxlength='64'></div>
							<div th:if="${name_error}" th:text="${name_error}"></div></td>
						
						<td th:data-label="#{view.tablelabel.grade}">
	  						<div class="field">
		  						<span th:utext="${T(com.shantery.thermo.util.ThermoReplaceValue).makeSelect('gradeAndBlank')}"></span>
							</div>
						</td>
						<td>
							<span class="ui checkbox">
								<input type="checkbox" name="highthermo" th:field="*{sch_high}" value="high">
								<label th:text="#{view.label.searchthermo}"></label>
							</span>
						</td>
					</tr>
					<tr th:text="${combi_msg}"></tr>
				</tbody>
			</table>
		</div>
			
		<p></p>
		<div class="ui center aligned container"><!-- 中央寄せ -->
			<button type="submit" class="ui inverted primary button"><p th:text="#{view.btn.search}"></button>
			<button type="button" class="ui inverted primary button" onClick="clearFormAll(); "><p th:text="#{view.btn.clear}"></button>
		</div>
		
		</form>
		
		<div class="ui container">
			<div class="ui divider"></div> <!-- テーブルの上のただの線 -->
		</div>
		
		<div th:if="${display}">
			<div class="ui right aligned  container"><!-- 右寄せ -->
				<form method="post" action="/excel">
					<button type="submit" class="ui inverted primary button"><p th:text="#{view.btn.copy}"></button>
				</form>
			</div>
		</div>
		
		<div class="ui container">
	​		<div th:if="${display}">
			<h3 th:text="${overlist_msg}"></h3>
				<table class="ui celled table">
					<thead class="delete">
						<tr>
							<th th:text="#{view.tablelabel.regist_date}"></th>
							<th th:text="#{view.tablelabel.name}"></th>
							<th th:text="#{view.tablelabel.gender}"></th>
							<th th:text="#{view.tablelabel.grade}"></th>
							<th th:text="#{view.tablelabel.age}"></th>
							<th th:text="#{view.tablelabel.thermo}"></th>
							<th th:text="#{view.tablelabel.taste}"></th>
							<th th:text="#{view.tablelabel.smell}"></th>
							<th th:text="#{view.tablelabel.cough}"></th>
							<th th:text="#{view.tablelabel.other}"></th>
						</tr>
					</thead>
					<th:block th:each="list : ${list}">
					<tbody>
						<tr>
							<td th:data-label="#{view.tablelabel.regist_date}" th:text="${list.regist_date}"></td>
							<td th:data-label="#{view.tablelabel.name}" th:text="${list.userInfoEntity.user_name}"></td>
							<td th:data-label="#{view.tablelabel.gender}" th:text="${T(com.shantery.thermo.util.ThermoReplaceValue).valueToName('gender',list.userInfoEntity.gender)}">
							<td th:data-label="#{view.tablelabel.grade}" th:text="${T(com.shantery.thermo.util.ThermoReplaceValue).valueToName('grade',list.userInfoEntity.grade)}"></td>
							<td th:data-label="#{view.tablelabel.age}"><p th:text="#{view.tablelabel.ageage(${T(com.shantery.thermo.util.ThermoReplaceValue).calcAge(list.userInfoEntity.birthday)})}"></td>
							<td th:data-label="#{view.tablelabel.thermo}">
								<div th:if="${list.thermo}"><p th:text="#{view.tablelabel.thermothermo(${list.thermo})}"></p></div></td>
							<td th:data-label="#{view.tablelabel.taste}" th:text="${T(com.shantery.thermo.util.ThermoReplaceValue).valueToName('exist',list.taste_disorder)}">
							<td th:data-label="#{view.tablelabel.smell}" th:text="${T(com.shantery.thermo.util.ThermoReplaceValue).valueToName('exist',list.olfactory_disorder)}">
							<td th:data-label="#{view.tablelabel.cough}" th:text="${T(com.shantery.thermo.util.ThermoReplaceValue).valueToName('exist',list.cough)}">
							<td th:data-label="#{view.tablelabel.other}" th:text="${list.other}"></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div th:unless="${display}">
				<h3 th:text="${nolist_msg}"></h3>
			</div>
		</div>
		
		<script type="text/javascript">
			function clearFormAll() {
			    for (var i=0; i<document.forms.length; ++i) {
			        clearForm(document.forms[i]);
			    }
			}
			function clearForm(form) {
			    for(var i=0; i<form.elements.length; ++i) {
			        clearElement(form.elements[i]);
			    }
			}
			function clearElement(element) {
			    switch(element.type) {
			        case "hidden":
			        case "submit":
			        case "reset":
			        case "button":
			        case "image":
			            return;
			        case "file":
			            return;
			        case "text":
			        case "password":
			        case "date":
			        case "textarea":
			            element.value = "";
			            return;
			        case "checkbox":
			        case "radio":
			            element.checked = false;
			            return;
			        case "select-one":
			        case "select-multiple":
			            element.selectedIndex = 0;
			            return;
			        default:
			    }
			}
			
			function onlyClearButton(){
				this.value="";
				return;
			}
			
			$('#datepicker').datepicker({
				maxDate: new Date()
			});
  		</script>
  		
  		
	</body>
</html>